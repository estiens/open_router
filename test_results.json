{"version":"3.12.2","examples":[{"id":"./spec/client_capability_validation_spec.rb[1:1:1]","description":"shows warnings for unsupported tool calling but allows request","full_description":"OpenRouter Client Capability Validation strict mode disabled (default) shows warnings for unsupported tool calling but allows request","status":"passed","file_path":"./spec/client_capability_validation_spec.rb","line_number":42,"run_time":0.00608,"pending_message":null},{"id":"./spec/client_capability_validation_spec.rb[1:1:2]","description":"shows warnings for unsupported structured outputs but allows request","full_description":"OpenRouter Client Capability Validation strict mode disabled (default) shows warnings for unsupported structured outputs but allows request","status":"passed","file_path":"./spec/client_capability_validation_spec.rb","line_number":54,"run_time":0.000281,"pending_message":null},{"id":"./spec/client_capability_validation_spec.rb[1:1:3]","description":"shows warnings for unsupported vision but allows request","full_description":"OpenRouter Client Capability Validation strict mode disabled (default) shows warnings for unsupported vision but allows request","status":"passed","file_path":"./spec/client_capability_validation_spec.rb","line_number":66,"run_time":0.000199,"pending_message":null},{"id":"./spec/client_capability_validation_spec.rb[1:1:4]","description":"doesn't show warnings when model supports the feature","full_description":"OpenRouter Client Capability Validation strict mode disabled (default) doesn't show warnings when model supports the feature","status":"passed","file_path":"./spec/client_capability_validation_spec.rb","line_number":82,"run_time":0.000234,"pending_message":null},{"id":"./spec/client_capability_validation_spec.rb[1:2:1]","description":"raises CapabilityError for unsupported tool calling","full_description":"OpenRouter Client Capability Validation strict mode enabled raises CapabilityError for unsupported tool calling","status":"passed","file_path":"./spec/client_capability_validation_spec.rb","line_number":102,"run_time":0.000147,"pending_message":null},{"id":"./spec/client_capability_validation_spec.rb[1:2:2]","description":"raises CapabilityError for unsupported structured outputs","full_description":"OpenRouter Client Capability Validation strict mode enabled raises CapabilityError for unsupported structured outputs","status":"passed","file_path":"./spec/client_capability_validation_spec.rb","line_number":112,"run_time":0.000159,"pending_message":null},{"id":"./spec/client_capability_validation_spec.rb[1:2:3]","description":"raises CapabilityError for unsupported vision","full_description":"OpenRouter Client Capability Validation strict mode enabled raises CapabilityError for unsupported vision","status":"passed","file_path":"./spec/client_capability_validation_spec.rb","line_number":122,"run_time":0.000133,"pending_message":null},{"id":"./spec/client_capability_validation_spec.rb[1:2:4]","description":"allows requests when model supports the feature","full_description":"OpenRouter Client Capability Validation strict mode enabled allows requests when model supports the feature","status":"passed","file_path":"./spec/client_capability_validation_spec.rb","line_number":136,"run_time":0.00024,"pending_message":null},{"id":"./spec/client_capability_validation_spec.rb[1:2:5]","description":"doesn't raise for array models (fallbacks)","full_description":"OpenRouter Client Capability Validation strict mode enabled doesn't raise for array models (fallbacks)","status":"passed","file_path":"./spec/client_capability_validation_spec.rb","line_number":146,"run_time":0.000196,"pending_message":null},{"id":"./spec/client_capability_validation_spec.rb[1:2:6]","description":"doesn't raise for auto model selection","full_description":"OpenRouter Client Capability Validation strict mode enabled doesn't raise for auto model selection","status":"passed","file_path":"./spec/client_capability_validation_spec.rb","line_number":156,"run_time":0.000197,"pending_message":null},{"id":"./spec/client_capability_validation_spec.rb[1:3:1]","description":"defaults strict_mode to false","full_description":"OpenRouter Client Capability Validation configuration defaults strict_mode to false","status":"passed","file_path":"./spec/client_capability_validation_spec.rb","line_number":168,"run_time":0.000586,"pending_message":null},{"id":"./spec/client_capability_validation_spec.rb[1:3:2]","description":"can be configured via environment variable","full_description":"OpenRouter Client Capability Validation configuration can be configured via environment variable","status":"passed","file_path":"./spec/client_capability_validation_spec.rb","line_number":173,"run_time":0.000124,"pending_message":null},{"id":"./spec/client_capability_validation_spec.rb[1:3:3]","description":"can be configured programmatically","full_description":"OpenRouter Client Capability Validation configuration can be configured programmatically","status":"passed","file_path":"./spec/client_capability_validation_spec.rb","line_number":180,"run_time":0.000102,"pending_message":null},{"id":"./spec/client_integration_spec.rb[1:1:1]","description":"includes tools in the request","full_description":"OpenRouter::Client#complete with tools includes tools in the request","status":"passed","file_path":"./spec/client_integration_spec.rb","line_number":69,"run_time":0.000215,"pending_message":null},{"id":"./spec/client_integration_spec.rb[1:1:2]","description":"handles Tool objects and hashes","full_description":"OpenRouter::Client#complete with tools handles Tool objects and hashes","status":"passed","file_path":"./spec/client_integration_spec.rb","line_number":82,"run_time":0.000104,"pending_message":null},{"id":"./spec/client_integration_spec.rb[1:1:3]","description":"returns Response object with tool calls","full_description":"OpenRouter::Client#complete with tools returns Response object with tool calls","status":"passed","file_path":"./spec/client_integration_spec.rb","line_number":103,"run_time":0.000457,"pending_message":null},{"id":"./spec/client_integration_spec.rb[1:2:1]","description":"includes response_format in the request with Schema object","full_description":"OpenRouter::Client#complete with structured outputs includes response_format in the request with Schema object","status":"passed","file_path":"./spec/client_integration_spec.rb","line_number":139,"run_time":0.000154,"pending_message":null},{"id":"./spec/client_integration_spec.rb[1:2:2]","description":"includes response_format in the request with hash format","full_description":"OpenRouter::Client#complete with structured outputs includes response_format in the request with hash format","status":"passed","file_path":"./spec/client_integration_spec.rb","line_number":154,"run_time":9.5e-05,"pending_message":null},{"id":"./spec/client_integration_spec.rb[1:2:3]","description":"returns Response object with structured output","full_description":"OpenRouter::Client#complete with structured outputs returns Response object with structured output","status":"passed","file_path":"./spec/client_integration_spec.rb","line_number":174,"run_time":0.006809,"pending_message":null},{"id":"./spec/client_integration_spec.rb[1:3:1]","description":"maintains backward compatibility for basic requests","full_description":"OpenRouter::Client#complete backward compatibility maintains backward compatibility for basic requests","status":"passed","file_path":"./spec/client_integration_spec.rb","line_number":187,"run_time":0.000167,"pending_message":null},{"id":"./spec/client_integration_spec.rb[1:3:2]","description":"handles extras parameter","full_description":"OpenRouter::Client#complete backward compatibility handles extras parameter","status":"passed","file_path":"./spec/client_integration_spec.rb","line_number":201,"run_time":9.1e-05,"pending_message":null},{"id":"./spec/client_integration_spec.rb[1:4:1]","description":"raises ServerError for API errors","full_description":"OpenRouter::Client error handling raises ServerError for API errors","status":"passed","file_path":"./spec/client_integration_spec.rb","line_number":216,"run_time":9.2e-05,"pending_message":null},{"id":"./spec/client_integration_spec.rb[1:4:2]","description":"raises ServerError for empty responses","full_description":"OpenRouter::Client error handling raises ServerError for empty responses","status":"passed","file_path":"./spec/client_integration_spec.rb","line_number":231,"run_time":7.4e-05,"pending_message":null},{"id":"./spec/client_integration_spec.rb[1:5:1]","description":"validates tool parameters","full_description":"OpenRouter::Client parameter validation validates tool parameters","status":"passed","file_path":"./spec/client_integration_spec.rb","line_number":241,"run_time":3.9e-05,"pending_message":null},{"id":"./spec/contract_tests_spec.rb[1:1:1]","description":"validates expected model structure from OpenRouter API","full_description":"OpenRouter API Contract Tests API response structure contracts validates expected model structure from OpenRouter API","status":"passed","file_path":"./spec/contract_tests_spec.rb","line_number":11,"run_time":0.001675,"pending_message":null},{"id":"./spec/contract_tests_spec.rb[1:1:2]","description":"validates architecture structure for vision capability detection","full_description":"OpenRouter API Contract Tests API response structure contracts validates architecture structure for vision capability detection","status":"passed","file_path":"./spec/contract_tests_spec.rb","line_number":46,"run_time":0.000109,"pending_message":null},{"id":"./spec/contract_tests_spec.rb[1:1:3]","description":"ensures pricing values can be converted to floats","full_description":"OpenRouter API Contract Tests API response structure contracts ensures pricing values can be converted to floats","status":"passed","file_path":"./spec/contract_tests_spec.rb","line_number":57,"run_time":0.000123,"pending_message":null},{"id":"./spec/contract_tests_spec.rb[1:1:4]","description":"validates created timestamp format","full_description":"OpenRouter API Contract Tests API response structure contracts validates created timestamp format","status":"passed","file_path":"./spec/contract_tests_spec.rb","line_number":71,"run_time":0.000141,"pending_message":null},{"id":"./spec/contract_tests_spec.rb[1:2:1]","description":"validates our capability detection logic","full_description":"OpenRouter API Contract Tests ModelRegistry assumptions validation validates our capability detection logic","status":"passed","file_path":"./spec/contract_tests_spec.rb","line_number":91,"run_time":0.003676,"pending_message":null},{"id":"./spec/contract_tests_spec.rb[1:2:2]","description":"validates performance tier logic is consistent","full_description":"OpenRouter API Contract Tests ModelRegistry assumptions validation validates performance tier logic is consistent","status":"passed","file_path":"./spec/contract_tests_spec.rb","line_number":117,"run_time":0.000783,"pending_message":null},{"id":"./spec/debug_healing_spec.rb[1:1]","description":"debugs the healing flow","full_description":"Debug Healing debugs the healing flow","status":"passed","file_path":"./spec/debug_healing_spec.rb","line_number":19,"run_time":0.000519,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:1:1:1]","description":"does NOT send response_format to API","full_description":"Force structured output on unsupported models Client#complete with force_structured_output: true does NOT send response_format to API","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":40,"run_time":0.000161,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:1:1:2]","description":"injects schema instructions into messages","full_description":"Force structured output on unsupported models Client#complete with force_structured_output: true injects schema instructions into messages","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":49,"run_time":0.000879,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:1:1:3]","description":"returns Response with forced_extraction flag","full_description":"Force structured output on unsupported models Client#complete with force_structured_output: true returns Response with forced_extraction flag","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":64,"run_time":0.000127,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:1:1:4]","description":"warns about forcing on any model","full_description":"Force structured output on unsupported models Client#complete with force_structured_output: true warns about forcing on any model","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":73,"run_time":0.000128,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:1:2:1]","description":"sends response_format to API normally","full_description":"Force structured output on unsupported models Client#complete with force_structured_output: false sends response_format to API normally","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":84,"run_time":0.000126,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:1:2:2]","description":"does not inject schema instructions","full_description":"Force structured output on unsupported models Client#complete with force_structured_output: false does not inject schema instructions","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":93,"run_time":0.000116,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:1:3:1]","description":"auto-forces when model lacks structured_outputs capability","full_description":"Force structured output on unsupported models Client#complete with force_structured_output: nil (auto-detect) auto-forces when model lacks structured_outputs capability","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":105,"run_time":0.000155,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:1:3:2]","description":"uses native format when model supports structured outputs","full_description":"Force structured output on unsupported models Client#complete with force_structured_output: nil (auto-detect) uses native format when model supports structured outputs","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":116,"run_time":0.000145,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:1:3:3]","description":"skips auto-detection for model arrays (fallbacks)","full_description":"Force structured output on unsupported models Client#complete with force_structured_output: nil (auto-detect) skips auto-detection for model arrays (fallbacks)","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":125,"run_time":0.000121,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:1:3:4]","description":"skips auto-detection for openrouter/auto","full_description":"Force structured output on unsupported models Client#complete with force_structured_output: nil (auto-detect) skips auto-detection for openrouter/auto","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":134,"run_time":0.000107,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:1:4:1]","description":"does not force or modify anything","full_description":"Force structured output on unsupported models Client#complete without response_format does not force or modify anything","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":145,"run_time":0.000108,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:2:1:1]","description":"extracts JSON from markdown code blocks","full_description":"Force structured output on unsupported models Response#structured_output with forced extraction with JSON in markdown code blocks extracts JSON from markdown code blocks","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":174,"run_time":0.000281,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:2:1:2]","description":"works in gentle mode","full_description":"Force structured output on unsupported models Response#structured_output with forced extraction with JSON in markdown code blocks works in gentle mode","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":179,"run_time":8.6e-05,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:2:2:1]","description":"extracts JSON from plain text response","full_description":"Force structured output on unsupported models Response#structured_output with forced extraction with JSON in plain text response extracts JSON from plain text response","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":189,"run_time":0.000143,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:2:3:1]","description":"sends full response content to first heal attempt","full_description":"Force structured output on unsupported models Response#structured_output with forced extraction with malformed JSON requiring healing sends full response content to first heal attempt","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":213,"run_time":0.000175,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:2:3:2]","description":"heals extracted JSON in strict mode without additional validation","full_description":"Force structured output on unsupported models Response#structured_output with forced extraction with malformed JSON requiring healing heals extracted JSON in strict mode without additional validation","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":224,"run_time":0.000145,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:2:3:3]","description":"returns extracted JSON without validation in gentle mode","full_description":"Force structured output on unsupported models Response#structured_output with forced extraction with malformed JSON requiring healing returns extracted JSON without validation in gentle mode","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":233,"run_time":0.00014,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:2:4:1]","description":"returns nil in gentle mode","full_description":"Force structured output on unsupported models Response#structured_output with forced extraction with no JSON found in response returns nil in gentle mode","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":246,"run_time":9.1e-05,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:2:4:2]","description":"attempts healing with full content in strict mode","full_description":"Force structured output on unsupported models Response#structured_output with forced extraction with no JSON found in response attempts healing with full content in strict mode","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":251,"run_time":0.00015,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:2:5:1]","description":"does not extract from markdown blocks in normal mode","full_description":"Force structured output on unsupported models Response#structured_output with forced extraction without forced_extraction flag does not extract from markdown blocks in normal mode","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":268,"run_time":7.4e-05,"pending_message":null},{"id":"./spec/force_structured_output_spec.rb[1:3:1]","description":"creates clear format instructions","full_description":"Force structured output on unsupported models schema instruction injection creates clear format instructions","status":"passed","file_path":"./spec/force_structured_output_spec.rb","line_number":279,"run_time":0.000152,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:1:1]","description":"includes JSON parse errors in healing prompt","full_description":"Self-healing with detailed error context JSON parse error healing includes JSON parse errors in healing prompt","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":42,"run_time":0.000372,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:1:2]","description":"succeeds after healing with parse error context","full_description":"Self-healing with detailed error context JSON parse error healing succeeds after healing with parse error context","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":57,"run_time":0.000226,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:2:1]","description":"includes specific schema validation errors in healing prompt","full_description":"Self-healing with detailed error context schema validation error healing includes specific schema validation errors in healing prompt","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":76,"run_time":0.000451,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:2:2]","description":"provides field-level validation errors","full_description":"Self-healing with detailed error context schema validation error healing provides field-level validation errors","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":93,"run_time":0.000828,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:2:3]","description":"succeeds more often with detailed error context","full_description":"Self-healing with detailed error context schema validation error healing succeeds more often with detailed error context","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":109,"run_time":0.000462,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:3:1]","description":"sends full response content to first heal attempt","full_description":"Self-healing with detailed error context forced extraction first heal attempt sends full response content to first heal attempt","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":138,"run_time":0.000271,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:3:2]","description":"provides context about extraction vs validation","full_description":"Self-healing with detailed error context forced extraction first heal attempt provides context about extraction vs validation","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":155,"run_time":0.000234,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:4:1]","description":"sends only extracted JSON for subsequent heals","full_description":"Self-healing with detailed error context subsequent heal attempts with extracted JSON sends only extracted JSON for subsequent heals","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":184,"run_time":0.000638,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:5:1]","description":"includes attempt count in final error message","full_description":"Self-healing with detailed error context maximum heal attempts with error progression includes attempt count in final error message","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":218,"run_time":0.00073,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:5:2]","description":"includes last validation errors in final error message","full_description":"Self-healing with detailed error context maximum heal attempts with error progression includes last validation errors in final error message","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":229,"run_time":0.00082,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:6:1]","description":"includes clear sections in healing prompt","full_description":"Self-healing with detailed error context healing prompt structure includes clear sections in healing prompt","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":248,"run_time":0.000374,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:6:2]","description":"includes the schema in JSON format","full_description":"Self-healing with detailed error context healing prompt structure includes the schema in JSON format","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":264,"run_time":0.000385,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:7:1]","description":"does not attempt healing when auto_heal is false","full_description":"Self-healing with detailed error context no healing when disabled does not attempt healing when auto_heal is false","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":285,"run_time":0.000128,"pending_message":null},{"id":"./spec/healing_with_errors_spec.rb[1:7:2]","description":"does not attempt healing in gentle mode","full_description":"Self-healing with detailed error context no healing when disabled does not attempt healing in gentle mode","status":"passed","file_path":"./spec/healing_with_errors_spec.rb","line_number":293,"run_time":9.3e-05,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:1:1:1]","description":"automatically forces extraction and succeeds","full_description":"End-to-end structured output scenarios model without native structured output support with auto-detection (default behavior) automatically forces extraction and succeeds","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":45,"run_time":0.000415,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:1:1:2]","description":"warns about auto-forcing on unsupported model","full_description":"End-to-end structured output scenarios model without native structured output support with auto-detection (default behavior) warns about auto-forcing on unsupported model","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":71,"run_time":0.000136,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:1:2:1]","description":"injects clear schema instructions into prompt","full_description":"End-to-end structured output scenarios model without native structured output support with explicit force_structured_output: true injects clear schema instructions into prompt","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":83,"run_time":0.000121,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:1:3:1]","description":"heals malformed JSON with full context","full_description":"End-to-end structured output scenarios model without native structured output support with malformed JSON requiring healing heals malformed JSON with full context","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":121,"run_time":0.000316,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:1:4:1]","description":"works in gentle mode without errors on malformed JSON","full_description":"End-to-end structured output scenarios model without native structured output support with gentle mode for resilience works in gentle mode without errors on malformed JSON","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":162,"run_time":0.000129,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:1:4:2]","description":"returns extracted JSON when possible in gentle mode","full_description":"End-to-end structured output scenarios model without native structured output support with gentle mode for resilience returns extracted JSON when possible in gentle mode","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":175,"run_time":0.000141,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:2:1]","description":"uses native format by default","full_description":"End-to-end structured output scenarios model with native structured output support uses native format by default","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":191,"run_time":0.000231,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:2:2]","description":"can force extraction even on supported models when explicitly requested","full_description":"End-to-end structured output scenarios model with native structured output support can force extraction even on supported models when explicitly requested","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":214,"run_time":0.000254,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:2:3]","description":"respects mode setting for native responses","full_description":"End-to-end structured output scenarios model with native structured output support respects mode setting for native responses","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":230,"run_time":0.000131,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:3:1]","description":"handles model arrays (fallbacks) without forcing","full_description":"End-to-end structured output scenarios mixed model scenarios handles model arrays (fallbacks) without forcing","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":244,"run_time":0.000219,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:3:2]","description":"handles openrouter/auto without forcing","full_description":"End-to-end structured output scenarios mixed model scenarios handles openrouter/auto without forcing","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":259,"run_time":0.000231,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:4:1:1]","description":"respects global auto-force configuration","full_description":"End-to-end structured output scenarios configuration-driven behavior with global configuration respects global auto-force configuration","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":293,"run_time":0.000135,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:4:1:2]","description":"respects default mode configuration","full_description":"End-to-end structured output scenarios configuration-driven behavior with global configuration respects default mode configuration","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":304,"run_time":0.000124,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:4:2:1]","description":"allows per-request mode override","full_description":"End-to-end structured output scenarios configuration-driven behavior with per-request overrides allows per-request mode override","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":318,"run_time":0.000237,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:4:2:2]","description":"allows per-request force override","full_description":"End-to-end structured output scenarios configuration-driven behavior with per-request overrides allows per-request force override","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":330,"run_time":0.000218,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:5:1]","description":"handles schema with multiple validation constraints","full_description":"End-to-end structured output scenarios complex real-world scenarios handles schema with multiple validation constraints","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":346,"run_time":0.00024,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:5:2]","description":"gracefully handles edge cases in forced extraction","full_description":"End-to-end structured output scenarios complex real-world scenarios gracefully handles edge cases in forced extraction","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":365,"run_time":0.004946,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:5:3]","description":"maintains performance with frequent structured output calls","full_description":"End-to-end structured output scenarios complex real-world scenarios maintains performance with frequent structured output calls","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":386,"run_time":0.001218,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:6:1]","description":"provides helpful error messages when all healing attempts fail","full_description":"End-to-end structured output scenarios error scenarios and recovery provides helpful error messages when all healing attempts fail","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":404,"run_time":0.000223,"pending_message":null},{"id":"./spec/integration/structured_output_flow_spec.rb[1:6:2]","description":"handles network errors gracefully during healing","full_description":"End-to-end structured output scenarios error scenarios and recovery handles network errors gracefully during healing","status":"passed","file_path":"./spec/integration/structured_output_flow_spec.rb","line_number":430,"run_time":0.000188,"pending_message":null},{"id":"./spec/integration_scenarios_spec.rb[1:1:1]","description":"uses ModelSelector for smart_complete","full_description":"OpenRouter Integration Scenarios Client + ModelSelector integration uses ModelSelector for smart_complete","status":"passed","file_path":"./spec/integration_scenarios_spec.rb","line_number":16,"run_time":0.000328,"pending_message":null},{"id":"./spec/integration_scenarios_spec.rb[1:2:1]","description":"handles model selection -> tool creation -> completion flow","full_description":"OpenRouter Integration Scenarios Full workflow scenarios handles model selection -> tool creation -> completion flow","status":"passed","file_path":"./spec/integration_scenarios_spec.rb","line_number":34,"run_time":0.000798,"pending_message":null},{"id":"./spec/integration_scenarios_spec.rb[1:2:2]","description":"handles graceful degradation across the stack","full_description":"OpenRouter Integration Scenarios Full workflow scenarios handles graceful degradation across the stack","status":"passed","file_path":"./spec/integration_scenarios_spec.rb","line_number":81,"run_time":0.000474,"pending_message":null},{"id":"./spec/integration_scenarios_spec.rb[1:3:1]","description":"handles large model registries efficiently","full_description":"OpenRouter Integration Scenarios Performance edge cases handles large model registries efficiently","status":"passed","file_path":"./spec/integration_scenarios_spec.rb","line_number":99,"run_time":0.000712,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:1:1]","description":"fetches models from API and caches them","full_description":"OpenRouter::ModelRegistry.fetch_and_cache_models fetches models from API and caches them","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":15,"run_time":0.001058,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:2:1]","description":"clears cache and fetches fresh data","full_description":"OpenRouter::ModelRegistry.refresh! clears cache and fetches fresh data","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":26,"run_time":0.001237,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:1:1]","description":"returns the cheapest available model","full_description":"OpenRouter::ModelRegistry.find_best_model with no requirements returns the cheapest available model","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":42,"run_time":0.000644,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:2:1]","description":"finds models that support vision","full_description":"OpenRouter::ModelRegistry.find_best_model with capability requirements finds models that support vision","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":54,"run_time":0.000672,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:2:2]","description":"finds models that support function calling","full_description":"OpenRouter::ModelRegistry.find_best_model with capability requirements finds models that support function calling","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":63,"run_time":0.000465,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:2:3]","description":"finds models that support structured outputs","full_description":"OpenRouter::ModelRegistry.find_best_model with capability requirements finds models that support structured outputs","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":72,"run_time":0.000574,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:2:4]","description":"returns nil when no models support required capabilities","full_description":"OpenRouter::ModelRegistry.find_best_model with capability requirements returns nil when no models support required capabilities","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":82,"run_time":0.000574,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:3:1]","description":"finds models within max cost limit","full_description":"OpenRouter::ModelRegistry.find_best_model with cost requirements finds models within max cost limit","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":91,"run_time":0.000764,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:3:2]","description":"returns cheapest model when multiple options exist","full_description":"OpenRouter::ModelRegistry.find_best_model with cost requirements returns cheapest model when multiple options exist","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":98,"run_time":0.00057,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:3:3]","description":"returns nil when no models are within cost limit","full_description":"OpenRouter::ModelRegistry.find_best_model with cost requirements returns nil when no models are within cost limit","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":111,"run_time":0.00047,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:4:1]","description":"finds models with sufficient context length","full_description":"OpenRouter::ModelRegistry.find_best_model with context length requirements finds models with sufficient context length","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":120,"run_time":0.00045,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:4:2]","description":"returns nil when no models have sufficient context","full_description":"OpenRouter::ModelRegistry.find_best_model with context length requirements returns nil when no models have sufficient context","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":127,"run_time":0.000537,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:5:1]","description":"finds models with specified performance tier","full_description":"OpenRouter::ModelRegistry.find_best_model with performance tier requirements finds models with specified performance tier","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":136,"run_time":0.000442,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:5:2]","description":"accepts models with higher performance tiers","full_description":"OpenRouter::ModelRegistry.find_best_model with performance tier requirements accepts models with higher performance tiers","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":145,"run_time":0.000449,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:6:1]","description":"finds models released after a specific date","full_description":"OpenRouter::ModelRegistry.find_best_model with date-based requirements finds models released after a specific date","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":154,"run_time":0.000565,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:6:2]","description":"prioritizes newer models when pick_newer is true","full_description":"OpenRouter::ModelRegistry.find_best_model with date-based requirements prioritizes newer models when pick_newer is true","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":165,"run_time":0.000447,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:6:3]","description":"returns nil when no models meet date requirements","full_description":"OpenRouter::ModelRegistry.find_best_model with date-based requirements returns nil when no models meet date requirements","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":175,"run_time":0.000444,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:7:1]","description":"finds models meeting all requirements","full_description":"OpenRouter::ModelRegistry.find_best_model with combined requirements finds models meeting all requirements","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":188,"run_time":0.000458,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:3:7:2]","description":"prioritizes cost when multiple models qualify","full_description":"OpenRouter::ModelRegistry.find_best_model with combined requirements prioritizes cost when multiple models qualify","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":200,"run_time":0.000456,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:4:1]","description":"returns fallback models for known models","full_description":"OpenRouter::ModelRegistry.get_fallbacks returns fallback models for known models","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":213,"run_time":0.000616,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:4:2]","description":"returns empty array for unknown models","full_description":"OpenRouter::ModelRegistry.get_fallbacks returns empty array for unknown models","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":220,"run_time":0.000456,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:4:3]","description":"returns fallbacks that are also in the registry","full_description":"OpenRouter::ModelRegistry.get_fallbacks returns fallbacks that are also in the registry","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":225,"run_time":0.000576,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:5:1]","description":"returns true for registered models","full_description":"OpenRouter::ModelRegistry.model_exists? returns true for registered models","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":234,"run_time":0.000474,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:5:2]","description":"returns false for unregistered models","full_description":"OpenRouter::ModelRegistry.model_exists? returns false for unregistered models","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":239,"run_time":0.000452,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:6:1]","description":"returns true when model has the specified capability","full_description":"OpenRouter::ModelRegistry.has_capability? returns true when model has the specified capability","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":245,"run_time":0.00056,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:6:2]","description":"returns false when model doesn't have the specified capability","full_description":"OpenRouter::ModelRegistry.has_capability? returns false when model doesn't have the specified capability","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":254,"run_time":0.000441,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:6:3]","description":"returns false for non-existent models","full_description":"OpenRouter::ModelRegistry.has_capability? returns false for non-existent models","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":263,"run_time":0.000461,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:7:1]","description":"returns model specifications for registered models","full_description":"OpenRouter::ModelRegistry.get_model_info returns model specifications for registered models","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":269,"run_time":0.000498,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:7:2]","description":"returns nil for unregistered models","full_description":"OpenRouter::ModelRegistry.get_model_info returns nil for unregistered models","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":280,"run_time":0.000598,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:8:1]","description":"returns all registered models","full_description":"OpenRouter::ModelRegistry.all_models returns all registered models","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":287,"run_time":0.000507,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:9:1]","description":"calculates cost for input tokens","full_description":"OpenRouter::ModelRegistry.calculate_estimated_cost calculates cost for input tokens","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":302,"run_time":0.000459,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:9:2]","description":"calculates cost for output tokens","full_description":"OpenRouter::ModelRegistry.calculate_estimated_cost calculates cost for output tokens","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":312,"run_time":0.000526,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:9:3]","description":"calculates combined cost for input and output tokens","full_description":"OpenRouter::ModelRegistry.calculate_estimated_cost calculates combined cost for input and output tokens","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":322,"run_time":0.000462,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:9:4]","description":"returns 0 for unknown models","full_description":"OpenRouter::ModelRegistry.calculate_estimated_cost returns 0 for unknown models","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":342,"run_time":0.000464,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:10:1]","description":"includes models from the fixture","full_description":"OpenRouter::ModelRegistry model data validation includes models from the fixture","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":353,"run_time":0.000466,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:10:2]","description":"has valid cost structure for all models","full_description":"OpenRouter::ModelRegistry model data validation has valid cost structure for all models","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":364,"run_time":0.000591,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:10:3]","description":"has valid capabilities for all models","full_description":"OpenRouter::ModelRegistry model data validation has valid capabilities for all models","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":374,"run_time":0.000533,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:10:4]","description":"has valid context lengths for all models","full_description":"OpenRouter::ModelRegistry model data validation has valid context lengths for all models","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":382,"run_time":0.000483,"pending_message":null},{"id":"./spec/model_registry_spec.rb[1:10:5]","description":"has valid creation timestamps for all models","full_description":"OpenRouter::ModelRegistry model data validation has valid creation timestamps for all models","status":"passed","file_path":"./spec/model_registry_spec.rb","line_number":389,"run_time":0.000478,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:1:1]","description":"creates a new selector with default settings","full_description":"OpenRouter::ModelSelector#initialize creates a new selector with default settings","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":16,"run_time":0.000268,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:2:1]","description":"sets cost optimization strategy","full_description":"OpenRouter::ModelSelector#optimize_for sets cost optimization strategy","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":27,"run_time":0.000136,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:2:2]","description":"sets performance optimization strategy","full_description":"OpenRouter::ModelSelector#optimize_for sets performance optimization strategy","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":32,"run_time":0.000109,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:2:3]","description":"sets latest optimization strategy","full_description":"OpenRouter::ModelSelector#optimize_for sets latest optimization strategy","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":38,"run_time":0.00011,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:2:4]","description":"sets context optimization strategy","full_description":"OpenRouter::ModelSelector#optimize_for sets context optimization strategy","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":44,"run_time":0.000183,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:2:5]","description":"raises error for unknown strategy","full_description":"OpenRouter::ModelSelector#optimize_for raises error for unknown strategy","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":49,"run_time":0.000142,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:2:6]","description":"returns new instance for method chaining","full_description":"OpenRouter::ModelSelector#optimize_for returns new instance for method chaining","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":53,"run_time":0.000115,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:3:1]","description":"adds single capability requirement","full_description":"OpenRouter::ModelSelector#require adds single capability requirement","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":63,"run_time":0.000109,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:3:2]","description":"adds multiple capability requirements","full_description":"OpenRouter::ModelSelector#require adds multiple capability requirements","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":68,"run_time":0.000111,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:3:3]","description":"accumulates capabilities across multiple calls","full_description":"OpenRouter::ModelSelector#require accumulates capabilities across multiple calls","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":73,"run_time":0.000115,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:3:4]","description":"handles duplicate capabilities","full_description":"OpenRouter::ModelSelector#require handles duplicate capabilities","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":78,"run_time":0.000542,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:3:5]","description":"returns new instance for method chaining","full_description":"OpenRouter::ModelSelector#require returns new instance for method chaining","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":83,"run_time":0.00018,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:4:1]","description":"sets max input cost requirement","full_description":"OpenRouter::ModelSelector#within_budget sets max input cost requirement","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":93,"run_time":0.000138,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:4:2]","description":"sets both input and output cost requirements","full_description":"OpenRouter::ModelSelector#within_budget sets both input and output cost requirements","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":98,"run_time":0.000168,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:4:3]","description":"returns new instance for method chaining","full_description":"OpenRouter::ModelSelector#within_budget returns new instance for method chaining","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":104,"run_time":0.00033,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:5:1]","description":"sets minimum context length requirement","full_description":"OpenRouter::ModelSelector#min_context sets minimum context length requirement","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":114,"run_time":0.00044,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:5:2]","description":"returns new instance for method chaining","full_description":"OpenRouter::ModelSelector#min_context returns new instance for method chaining","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":119,"run_time":0.000333,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:6:1]","description":"sets date requirement with Date object","full_description":"OpenRouter::ModelSelector#newer_than sets date requirement with Date object","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":129,"run_time":0.000608,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:6:2]","description":"sets date requirement with Time object","full_description":"OpenRouter::ModelSelector#newer_than sets date requirement with Time object","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":135,"run_time":0.00021,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:6:3]","description":"returns new instance for method chaining","full_description":"OpenRouter::ModelSelector#newer_than returns new instance for method chaining","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":141,"run_time":0.000424,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:7:1:1]","description":"sets preferred providers","full_description":"OpenRouter::ModelSelector provider filtering methods #prefer_providers sets preferred providers","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":152,"run_time":0.000466,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:7:1:2]","description":"handles array input","full_description":"OpenRouter::ModelSelector provider filtering methods #prefer_providers handles array input","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":157,"run_time":0.000604,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:7:1:3]","description":"returns new instance for method chaining","full_description":"OpenRouter::ModelSelector provider filtering methods #prefer_providers returns new instance for method chaining","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":162,"run_time":0.000421,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:7:2:1]","description":"sets required providers","full_description":"OpenRouter::ModelSelector provider filtering methods #require_providers sets required providers","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":170,"run_time":0.000333,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:7:2:2]","description":"returns new instance for method chaining","full_description":"OpenRouter::ModelSelector provider filtering methods #require_providers returns new instance for method chaining","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":175,"run_time":0.00026,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:7:3:1]","description":"sets avoided providers","full_description":"OpenRouter::ModelSelector provider filtering methods #avoid_providers sets avoided providers","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":183,"run_time":0.000333,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:7:3:2]","description":"returns new instance for method chaining","full_description":"OpenRouter::ModelSelector provider filtering methods #avoid_providers returns new instance for method chaining","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":188,"run_time":0.000214,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:7:4:1]","description":"sets avoided patterns","full_description":"OpenRouter::ModelSelector provider filtering methods #avoid_patterns sets avoided patterns","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":196,"run_time":0.000112,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:7:4:2]","description":"returns new instance for method chaining","full_description":"OpenRouter::ModelSelector provider filtering methods #avoid_patterns returns new instance for method chaining","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":201,"run_time":0.000362,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:8:1]","description":"sets fallback options","full_description":"OpenRouter::ModelSelector#with_fallbacks sets fallback options","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":212,"run_time":0.0004,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:8:2]","description":"uses default options","full_description":"OpenRouter::ModelSelector#with_fallbacks uses default options","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":218,"run_time":0.000238,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:8:3]","description":"returns new instance for method chaining","full_description":"OpenRouter::ModelSelector#with_fallbacks returns new instance for method chaining","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":224,"run_time":0.000106,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:1:1]","description":"returns the cheapest model","full_description":"OpenRouter::ModelSelector#choose with cost optimization returns the cheapest model","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":233,"run_time":0.001012,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:1:2]","description":"returns model with specs when requested","full_description":"OpenRouter::ModelSelector#choose with cost optimization returns model with specs when requested","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":241,"run_time":0.001003,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:2:1]","description":"finds models with function calling capability","full_description":"OpenRouter::ModelSelector#choose with capability requirements finds models with function calling capability","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":252,"run_time":0.000886,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:2:2]","description":"finds models with vision capability","full_description":"OpenRouter::ModelSelector#choose with capability requirements finds models with vision capability","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":262,"run_time":0.000926,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:2:3]","description":"finds models with multiple capabilities","full_description":"OpenRouter::ModelSelector#choose with capability requirements finds models with multiple capabilities","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":272,"run_time":0.00123,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:2:4]","description":"returns nil when no models have required capabilities","full_description":"OpenRouter::ModelSelector#choose with capability requirements returns nil when no models have required capabilities","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":282,"run_time":0.000714,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:3:1]","description":"finds models within budget","full_description":"OpenRouter::ModelSelector#choose with cost constraints finds models within budget","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":290,"run_time":0.001086,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:3:2]","description":"returns nil when no models are within budget","full_description":"OpenRouter::ModelSelector#choose with cost constraints returns nil when no models are within budget","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":300,"run_time":0.001067,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:4:1]","description":"finds models with sufficient context","full_description":"OpenRouter::ModelSelector#choose with context length requirements finds models with sufficient context","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":308,"run_time":0.000771,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:5:1]","description":"only returns models from required providers","full_description":"OpenRouter::ModelSelector#choose with provider filtering only returns models from required providers","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":322,"run_time":0.001427,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:5:2]","description":"avoids models from excluded providers","full_description":"OpenRouter::ModelSelector#choose with provider filtering avoids models from excluded providers","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":329,"run_time":0.000779,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:5:3]","description":"avoids models matching patterns","full_description":"OpenRouter::ModelSelector#choose with provider filtering avoids models matching patterns","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":336,"run_time":0.000796,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:5:4]","description":"returns nil when no models match provider requirements","full_description":"OpenRouter::ModelSelector#choose with provider filtering returns nil when no models match provider requirements","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":343,"run_time":0.000832,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:6:1]","description":"prefers premium tier models when available, otherwise standard","full_description":"OpenRouter::ModelSelector#choose with performance optimization prefers premium tier models when available, otherwise standard","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":351,"run_time":0.000772,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:7:1]","description":"returns the newest model","full_description":"OpenRouter::ModelSelector#choose with latest optimization returns the newest model","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":367,"run_time":0.001194,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:9:8:1]","description":"returns the model with largest context window","full_description":"OpenRouter::ModelSelector#choose with context optimization returns the model with largest context window","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":380,"run_time":0.000601,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:10:1]","description":"returns array of model IDs","full_description":"OpenRouter::ModelSelector#choose_with_fallbacks returns array of model IDs","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":394,"run_time":0.000682,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:10:2]","description":"returns models in order of preference","full_description":"OpenRouter::ModelSelector#choose_with_fallbacks returns models in order of preference","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":402,"run_time":0.002719,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:10:3]","description":"respects the limit parameter","full_description":"OpenRouter::ModelSelector#choose_with_fallbacks respects the limit parameter","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":413,"run_time":0.000561,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:10:4]","description":"returns empty array when no models match","full_description":"OpenRouter::ModelSelector#choose_with_fallbacks returns empty array when no models match","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":419,"run_time":0.000695,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:10:5]","description":"works with capability requirements","full_description":"OpenRouter::ModelSelector#choose_with_fallbacks works with capability requirements","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":425,"run_time":0.000576,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:11:1]","description":"returns a model when requirements can be met","full_description":"OpenRouter::ModelSelector#choose_with_fallback returns a model when requirements can be met","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":439,"run_time":0.000713,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:11:2]","description":"gracefully degrades requirements when needed","full_description":"OpenRouter::ModelSelector#choose_with_fallback gracefully degrades requirements when needed","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":445,"run_time":0.000538,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:11:3]","description":"returns cheapest model as final fallback","full_description":"OpenRouter::ModelSelector#choose_with_fallback returns cheapest model as final fallback","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":460,"run_time":0.000703,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:12:1]","description":"returns current selection state","full_description":"OpenRouter::ModelSelector#selection_criteria returns current selection state","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":474,"run_time":0.000292,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:12:2]","description":"returns defensive copies","full_description":"OpenRouter::ModelSelector#selection_criteria returns defensive copies","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":488,"run_time":0.000123,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:13:1]","description":"calculates estimated cost for a model","full_description":"OpenRouter::ModelSelector#estimate_cost calculates estimated cost for a model","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":500,"run_time":0.000399,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:13:2]","description":"uses default token counts","full_description":"OpenRouter::ModelSelector#estimate_cost uses default token counts","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":507,"run_time":0.000596,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:14:1]","description":"supports complex chaining","full_description":"OpenRouter::ModelSelector method chaining supports complex chaining","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":516,"run_time":0.000504,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:14:2]","description":"maintains immutability of chained calls","full_description":"OpenRouter::ModelSelector method chaining maintains immutability of chained calls","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":529,"run_time":0.000246,"pending_message":null},{"id":"./spec/model_selector_spec.rb[1:15:1]","description":"handles edge cases gracefully","full_description":"OpenRouter::ModelSelector error handling handles edge cases gracefully","status":"passed","file_path":"./spec/model_selector_spec.rb","line_number":545,"run_time":0.000586,"pending_message":null},{"id":"./spec/open_router_spec.rb[1:1]","description":"has a version number","full_description":"OpenRouter has a version number","status":"passed","file_path":"./spec/open_router_spec.rb","line_number":4,"run_time":3.4e-05,"pending_message":null},{"id":"./spec/open_router_spec.rb[1:2:1:1]","description":"yields the configuration","full_description":"OpenRouter OpenRouter::Client#initialize yields the configuration","status":"passed","file_path":"./spec/open_router_spec.rb","line_number":20,"run_time":0.001009,"pending_message":null},{"id":"./spec/open_router_spec.rb[1:2:2:1]","description":"sends a POST request to the completions endpoint with the correct parameters","full_description":"OpenRouter OpenRouter::Client#complete sends a POST request to the completions endpoint with the correct parameters","status":"passed","file_path":"./spec/open_router_spec.rb","line_number":52,"run_time":0.000147,"pending_message":null},{"id":"./spec/open_router_spec.rb[1:2:3:1]","description":"sends a GET request to the models endpoint","full_description":"OpenRouter OpenRouter::Client#models sends a GET request to the models endpoint","status":"passed","file_path":"./spec/open_router_spec.rb","line_number":69,"run_time":7.1e-05,"pending_message":null},{"id":"./spec/open_router_spec.rb[1:2:3:2]","description":"returns the data from the response","full_description":"OpenRouter OpenRouter::Client#models returns the data from the response","status":"passed","file_path":"./spec/open_router_spec.rb","line_number":74,"run_time":6.7e-05,"pending_message":null},{"id":"./spec/open_router_spec.rb[1:2:4:1]","description":"sends a GET request to the generation endpoint with the generation ID","full_description":"OpenRouter OpenRouter::Client#query_generation_stats sends a GET request to the generation endpoint with the generation ID","status":"passed","file_path":"./spec/open_router_spec.rb","line_number":83,"run_time":7.4e-05,"pending_message":null},{"id":"./spec/open_router_spec.rb[1:2:4:2]","description":"returns the data from the response","full_description":"OpenRouter OpenRouter::Client#query_generation_stats returns the data from the response","status":"passed","file_path":"./spec/open_router_spec.rb","line_number":88,"run_time":6.5e-05,"pending_message":null},{"id":"./spec/performance_spec.rb[1:1:1]","description":"caches processed models to avoid repeated computation","full_description":"Performance characteristics ModelRegistry performance caches processed models to avoid repeated computation","status":"pending","file_path":"./spec/performance_spec.rb","line_number":15,"run_time":0.0003,"pending_message":"Performance test sensitive to execution order and timing"},{"id":"./spec/performance_spec.rb[1:1:2]","description":"performs model searches efficiently","full_description":"Performance characteristics ModelRegistry performance performs model searches efficiently","status":"passed","file_path":"./spec/performance_spec.rb","line_number":35,"run_time":0.000558,"pending_message":null},{"id":"./spec/performance_spec.rb[1:2:1]","description":"handles complex chaining without performance degradation","full_description":"Performance characteristics ModelSelector performance handles complex chaining without performance degradation","status":"passed","file_path":"./spec/performance_spec.rb","line_number":58,"run_time":0.000853,"pending_message":null},{"id":"./spec/response_healing_spec.rb[1:1:1:1]","description":"heals JSON parsing errors with simple mock","full_description":"Response Healing JSON healing with malformed JSON heals JSON parsing errors with simple mock","status":"passed","file_path":"./spec/response_healing_spec.rb","line_number":23,"run_time":0.000898,"pending_message":null},{"id":"./spec/response_healing_spec.rb[1:1:2:1]","description":"returns parsed JSON without healing","full_description":"Response Healing JSON healing with valid JSON returns parsed JSON without healing","status":"passed","file_path":"./spec/response_healing_spec.rb","line_number":44,"run_time":0.000186,"pending_message":null},{"id":"./spec/response_healing_spec.rb[1:1:3:1]","description":"raises JSON::ParserError for malformed JSON","full_description":"Response Healing JSON healing when auto_heal is disabled raises JSON::ParserError for malformed JSON","status":"passed","file_path":"./spec/response_healing_spec.rb","line_number":60,"run_time":6.5e-05,"pending_message":null},{"id":"./spec/response_healing_spec.rb[1:1:4:1]","description":"cannot heal and raises the original error","full_description":"Response Healing JSON healing when client is not available cannot heal and raises the original error","status":"passed","file_path":"./spec/response_healing_spec.rb","line_number":73,"run_time":5.0e-05,"pending_message":null},{"id":"./spec/response_healing_spec.rb[1:2:1:1]","description":"heals schema validation failures","full_description":"Response Healing schema healing with schema validation errors heals schema validation failures","status":"passed","file_path":"./spec/response_healing_spec.rb","line_number":97,"run_time":0.000494,"pending_message":null},{"id":"./spec/response_healing_spec.rb[1:2:2:1]","description":"skips schema validation but still heals JSON parsing","full_description":"Response Healing schema healing when json-schema gem is not available skips schema validation but still heals JSON parsing","status":"passed","file_path":"./spec/response_healing_spec.rb","line_number":134,"run_time":0.000121,"pending_message":null},{"id":"./spec/response_healing_spec.rb[1:3:1]","description":"respects custom healer model","full_description":"Response Healing configuration options respects custom healer model","status":"passed","file_path":"./spec/response_healing_spec.rb","line_number":151,"run_time":0.000146,"pending_message":null},{"id":"./spec/response_healing_spec.rb[1:3:2]","description":"respects custom max_heal_attempts","full_description":"Response Healing configuration options respects custom max_heal_attempts","status":"passed","file_path":"./spec/response_healing_spec.rb","line_number":171,"run_time":0.000108,"pending_message":null},{"id":"./spec/response_healing_spec.rb[1:4:1]","description":"generates appropriate healing prompts for JSON errors","full_description":"Response Healing healing prompts generates appropriate healing prompts for JSON errors","status":"passed","file_path":"./spec/response_healing_spec.rb","line_number":191,"run_time":0.000173,"pending_message":null},{"id":"./spec/response_healing_spec.rb[1:4:2]","description":"includes schema information in healing prompts when available","full_description":"Response Healing healing prompts includes schema information in healing prompts when available","status":"passed","file_path":"./spec/response_healing_spec.rb","line_number":214,"run_time":0.000334,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:1:1:1]","description":"parses and returns JSON object","full_description":"Response structured output modes #structured_output with valid JSON content with mode: :strict (default) parses and returns JSON object","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":27,"run_time":0.000204,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:1:1:2]","description":"validates against schema when available","full_description":"Response structured output modes #structured_output with valid JSON content with mode: :strict (default) validates against schema when available","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":32,"run_time":9.9e-05,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:1:1:3]","description":"uses strict mode by default","full_description":"Response structured output modes #structured_output with valid JSON content with mode: :strict (default) uses strict mode by default","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":37,"run_time":0.00012,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:1:2:1]","description":"parses and returns JSON object without validation","full_description":"Response structured output modes #structured_output with valid JSON content with mode: :gentle parses and returns JSON object without validation","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":44,"run_time":4.9e-05,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:1:2:2]","description":"does not validate against schema","full_description":"Response structured output modes #structured_output with valid JSON content with mode: :gentle does not validate against schema","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":49,"run_time":7.7e-05,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:2:1:1]","description":"raises StructuredOutputError on invalid JSON","full_description":"Response structured output modes #structured_output with invalid JSON content with mode: :strict raises StructuredOutputError on invalid JSON","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":61,"run_time":6.4e-05,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:2:1:2:1]","description":"attempts healing on parse failure","full_description":"Response structured output modes #structured_output with invalid JSON content with mode: :strict with auto_heal enabled attempts healing on parse failure","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":76,"run_time":0.00012,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:2:2:1]","description":"returns nil on invalid JSON instead of raising","full_description":"Response structured output modes #structured_output with invalid JSON content with mode: :gentle returns nil on invalid JSON instead of raising","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":85,"run_time":5.2e-05,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:2:2:2]","description":"does not attempt healing even if auto_heal is enabled","full_description":"Response structured output modes #structured_output with invalid JSON content with mode: :gentle does not attempt healing even if auto_heal is enabled","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":90,"run_time":7.9e-05,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:3:1:1]","description":"raises StructuredOutputError on schema validation failure","full_description":"Response structured output modes #structured_output with schema validation failures with mode: :strict raises StructuredOutputError on schema validation failure","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":102,"run_time":0.000215,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:3:2:1]","description":"returns parsed JSON even if schema validation would fail","full_description":"Response structured output modes #structured_output with schema validation failures with mode: :gentle returns parsed JSON even if schema validation would fail","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":110,"run_time":4.9e-05,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:4:1]","description":"returns nil in both modes when no response_format is set","full_description":"Response structured output modes #structured_output with no structured output content returns nil in both modes when no response_format is set","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":120,"run_time":4.2e-05,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:5:1]","description":"raises ArgumentError for invalid mode","full_description":"Response structured output modes #structured_output with invalid mode parameter raises ArgumentError for invalid mode","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":129,"run_time":5.0e-05,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:6:1]","description":"respects explicit auto_heal: true override","full_description":"Response structured output modes #structured_output auto_heal parameter behavior respects explicit auto_heal: true override","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":146,"run_time":0.000111,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:6:2]","description":"respects explicit auto_heal: false override","full_description":"Response structured output modes #structured_output auto_heal parameter behavior respects explicit auto_heal: false override","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":152,"run_time":0.000106,"pending_message":null},{"id":"./spec/response_mode_spec.rb[1:1:6:3]","description":"ignores auto_heal in gentle mode","full_description":"Response structured output modes #structured_output auto_heal parameter behavior ignores auto_heal in gentle mode","status":"passed","file_path":"./spec/response_mode_spec.rb","line_number":159,"run_time":0.000104,"pending_message":null},{"id":"./spec/response_spec.rb[1:1:1]","description":"wraps hash response","full_description":"OpenRouter::Response#initialize wraps hash response","status":"passed","file_path":"./spec/response_spec.rb","line_number":77,"run_time":4.3e-05,"pending_message":null},{"id":"./spec/response_spec.rb[1:1:2]","description":"handles non-hash input","full_description":"OpenRouter::Response#initialize handles non-hash input","status":"passed","file_path":"./spec/response_spec.rb","line_number":83,"run_time":3.8e-05,"pending_message":null},{"id":"./spec/response_spec.rb[1:2:1]","description":"provides access to response fields","full_description":"OpenRouter::Response basic accessors provides access to response fields","status":"passed","file_path":"./spec/response_spec.rb","line_number":92,"run_time":4.8e-05,"pending_message":null},{"id":"./spec/response_spec.rb[1:2:2]","description":"provides content access","full_description":"OpenRouter::Response basic accessors provides content access","status":"passed","file_path":"./spec/response_spec.rb","line_number":100,"run_time":4.5e-05,"pending_message":null},{"id":"./spec/response_spec.rb[1:2:3]","description":"provides choices access","full_description":"OpenRouter::Response basic accessors provides choices access","status":"passed","file_path":"./spec/response_spec.rb","line_number":105,"run_time":4.1e-05,"pending_message":null},{"id":"./spec/response_spec.rb[1:3:1]","description":"delegates hash methods","full_description":"OpenRouter::Response hash delegation delegates hash methods","status":"passed","file_path":"./spec/response_spec.rb","line_number":114,"run_time":5.2e-05,"pending_message":null},{"id":"./spec/response_spec.rb[1:3:2]","description":"converts to json","full_description":"OpenRouter::Response hash delegation converts to json","status":"passed","file_path":"./spec/response_spec.rb","line_number":121,"run_time":4.8e-05,"pending_message":null},{"id":"./spec/response_spec.rb[1:4:1]","description":"detects tool calls","full_description":"OpenRouter::Response tool calling detects tool calls","status":"passed","file_path":"./spec/response_spec.rb","line_number":130,"run_time":4.5e-05,"pending_message":null},{"id":"./spec/response_spec.rb[1:4:2]","description":"parses tool calls correctly","full_description":"OpenRouter::Response tool calling parses tool calls correctly","status":"passed","file_path":"./spec/response_spec.rb","line_number":136,"run_time":4.4e-05,"pending_message":null},{"id":"./spec/response_spec.rb[1:4:3]","description":"converts to message format","full_description":"OpenRouter::Response tool calling converts to message format","status":"passed","file_path":"./spec/response_spec.rb","line_number":143,"run_time":4.4e-05,"pending_message":null},{"id":"./spec/response_spec.rb[1:5:1]","description":"parses structured output","full_description":"OpenRouter::Response structured outputs parses structured output","status":"passed","file_path":"./spec/response_spec.rb","line_number":169,"run_time":0.000216,"pending_message":null},{"id":"./spec/response_spec.rb[1:5:2]","description":"handles Schema object as response_format","full_description":"OpenRouter::Response structured outputs handles Schema object as response_format","status":"passed","file_path":"./spec/response_spec.rb","line_number":177,"run_time":0.000121,"pending_message":null},{"id":"./spec/response_spec.rb[1:5:3]","description":"handles invalid JSON gracefully","full_description":"OpenRouter::Response structured outputs handles invalid JSON gracefully","status":"passed","file_path":"./spec/response_spec.rb","line_number":183,"run_time":5.6e-05,"pending_message":null},{"id":"./spec/response_spec.rb[1:5:4]","description":"validates structured output","full_description":"OpenRouter::Response structured outputs validates structured output","status":"passed","file_path":"./spec/response_spec.rb","line_number":196,"run_time":0.000326,"pending_message":null},{"id":"./spec/response_spec.rb[1:5:5]","description":"detects invalid structured output","full_description":"OpenRouter::Response structured outputs detects invalid structured output","status":"passed","file_path":"./spec/response_spec.rb","line_number":201,"run_time":0.000302,"pending_message":null},{"id":"./spec/response_spec.rb[1:5:6]","description":"returns true for validation when no schema provided","full_description":"OpenRouter::Response structured outputs returns true for validation when no schema provided","status":"passed","file_path":"./spec/response_spec.rb","line_number":212,"run_time":3.8e-05,"pending_message":null},{"id":"./spec/response_spec.rb[1:5:7]","description":"returns true for validation when JSON::Validator not available","full_description":"OpenRouter::Response structured outputs returns true for validation when JSON::Validator not available","status":"passed","file_path":"./spec/response_spec.rb","line_number":217,"run_time":0.000273,"pending_message":null},{"id":"./spec/response_spec.rb[1:6:1]","description":"detects errors","full_description":"OpenRouter::Response error handling detects errors","status":"passed","file_path":"./spec/response_spec.rb","line_number":237,"run_time":4.0e-05,"pending_message":null},{"id":"./spec/response_spec.rb[1:7:1]","description":"handles empty responses gracefully","full_description":"OpenRouter::Response empty responses handles empty responses gracefully","status":"passed","file_path":"./spec/response_spec.rb","line_number":246,"run_time":4.4e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:1:1:1]","description":"accepts enum parameter for string fields","full_description":"Schema DSL enhancements enum support for string fields accepts enum parameter for string fields","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":16,"run_time":4.2e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:1:1:2]","description":"works with optional enum fields","full_description":"Schema DSL enhancements enum support for string fields works with optional enum fields","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":24,"run_time":4.2e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:1:1:3]","description":"combines enum with other properties","full_description":"Schema DSL enhancements enum support for string fields combines enum with other properties","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":33,"run_time":3.3e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:1:2:1]","description":"accepts enum parameter for integer fields","full_description":"Schema DSL enhancements enum support for integer fields accepts enum parameter for integer fields","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":55,"run_time":3.6e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:1:2:2]","description":"works with required integer enum fields","full_description":"Schema DSL enhancements enum support for integer fields works with required integer enum fields","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":63,"run_time":3.7e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:1:3:1]","description":"accepts enum parameter for number fields","full_description":"Schema DSL enhancements enum support for number fields accepts enum parameter for number fields","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":81,"run_time":3.5e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:1:4:1]","description":"properly serializes enum constraints in schema","full_description":"Schema DSL enhancements enum support validation properly serializes enum constraints in schema","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":91,"run_time":4.0e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:2:3]","description":"properly serializes format constraints","full_description":"Schema DSL enhancements format support properly serializes format constraints","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":163,"run_time":3.7e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:2:1:1]","description":"accepts format parameter for string fields","full_description":"Schema DSL enhancements format support for string fields accepts format parameter for string fields","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":117,"run_time":3.8e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:2:1:2]","description":"supports standard JSON Schema formats","full_description":"Schema DSL enhancements format support for string fields supports standard JSON Schema formats","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":125,"run_time":3.5e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:2:1:3]","description":"combines format with other properties","full_description":"Schema DSL enhancements format support for string fields combines format with other properties","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":134,"run_time":3.3e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:2:2:1]","description":"accepts custom format values","full_description":"Schema DSL enhancements format support custom formats accepts custom format values","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":149,"run_time":3.1e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:3:1]","description":"supports both enum and format on the same field","full_description":"Schema DSL enhancements combined enum and format supports both enum and format on the same field","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":177,"run_time":3.9e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:4:1:1]","description":"supports enum in array items","full_description":"Schema DSL enhancements array items with enum/format using ItemsBuilder supports enum in array items","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":204,"run_time":4.0e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:4:1:2]","description":"supports format in array items","full_description":"Schema DSL enhancements array items with enum/format using ItemsBuilder supports format in array items","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":213,"run_time":3.5e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:4:2:1]","description":"works with pre-defined items schema","full_description":"Schema DSL enhancements array items with enum/format using items parameter works with pre-defined items schema","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":224,"run_time":3.3e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:5:1]","description":"returns clear instructions for model prompting","full_description":"Schema DSL enhancements #get_format_instructions returns clear instructions for model prompting","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":249,"run_time":4.4e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:5:2]","description":"includes schema details in instructions","full_description":"Schema DSL enhancements #get_format_instructions includes schema details in instructions","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":257,"run_time":4.3e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:5:3]","description":"includes examples and guidelines","full_description":"Schema DSL enhancements #get_format_instructions includes examples and guidelines","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":265,"run_time":3.8e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:5:4]","description":"emphasizes JSON-only response","full_description":"Schema DSL enhancements #get_format_instructions emphasizes JSON-only response","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":273,"run_time":3.7e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:5:5:1]","description":"provides instructions suitable for prompt injection","full_description":"Schema DSL enhancements #get_format_instructions for forced structured output provides instructions suitable for prompt injection","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":281,"run_time":4.7e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:6:1]","description":"maintains existing **options behavior","full_description":"Schema DSL enhancements backward compatibility maintains existing **options behavior","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":292,"run_time":3.0e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:6:2]","description":"allows **options to override enum/format","full_description":"Schema DSL enhancements backward compatibility allows **options to override enum/format","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":304,"run_time":3.0e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:7:1]","description":"validates enum values are provided","full_description":"Schema DSL enhancements error handling validates enum values are provided","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":323,"run_time":3.1e-05,"pending_message":null},{"id":"./spec/schema_enhancements_spec.rb[1:7:2]","description":"validates format values are strings","full_description":"Schema DSL enhancements error handling validates format values are strings","status":"passed","file_path":"./spec/schema_enhancements_spec.rb","line_number":331,"run_time":3.0e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:1:1]","description":"creates schema with DSL","full_description":"OpenRouter::Schema.define creates schema with DSL","status":"passed","file_path":"./spec/schema_spec.rb","line_number":5,"run_time":4.2e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:1:2]","description":"supports nested objects","full_description":"OpenRouter::Schema.define supports nested objects","status":"passed","file_path":"./spec/schema_spec.rb","line_number":20,"run_time":3.9e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:1:3]","description":"supports arrays with typed items","full_description":"OpenRouter::Schema.define supports arrays with typed items","status":"passed","file_path":"./spec/schema_spec.rb","line_number":36,"run_time":3.7e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:1:4]","description":"supports simple array items","full_description":"OpenRouter::Schema.define supports simple array items","status":"passed","file_path":"./spec/schema_spec.rb","line_number":53,"run_time":3.0e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:2:1]","description":"creates schema from hash","full_description":"OpenRouter::Schema.new creates schema from hash","status":"passed","file_path":"./spec/schema_spec.rb","line_number":67,"run_time":3.1e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:3:1]","description":"returns proper OpenRouter format","full_description":"OpenRouter::Schema#to_h returns proper OpenRouter format","status":"passed","file_path":"./spec/schema_spec.rb","line_number":83,"run_time":3.7e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:4:1]","description":"requires name","full_description":"OpenRouter::Schema validation requires name","status":"passed","file_path":"./spec/schema_spec.rb","line_number":99,"run_time":3.3e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:4:2]","description":"requires hash schema","full_description":"OpenRouter::Schema validation requires hash schema","status":"passed","file_path":"./spec/schema_spec.rb","line_number":105,"run_time":3.1e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:5:1]","description":"supports all basic types","full_description":"OpenRouter::Schema property types supports all basic types","status":"passed","file_path":"./spec/schema_spec.rb","line_number":113,"run_time":3.6e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:5:2]","description":"supports property options","full_description":"OpenRouter::Schema property types supports property options","status":"passed","file_path":"./spec/schema_spec.rb","line_number":132,"run_time":3.6e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:6:1]","description":"defaults to strict true","full_description":"OpenRouter::Schema strict mode defaults to strict true","status":"passed","file_path":"./spec/schema_spec.rb","line_number":151,"run_time":2.9e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:6:2]","description":"can be set to false","full_description":"OpenRouter::Schema strict mode can be set to false","status":"passed","file_path":"./spec/schema_spec.rb","line_number":159,"run_time":2.7e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:6:3]","description":"sets additionalProperties to false when strict","full_description":"OpenRouter::Schema strict mode sets additionalProperties to false when strict","status":"passed","file_path":"./spec/schema_spec.rb","line_number":167,"run_time":2.7e-05,"pending_message":null},{"id":"./spec/schema_spec.rb[1:7:1]","description":"validates correct data","full_description":"OpenRouter::Schema validation validates correct data","status":"passed","file_path":"./spec/schema_spec.rb","line_number":186,"run_time":0.000248,"pending_message":null},{"id":"./spec/schema_spec.rb[1:7:2]","description":"rejects invalid data","full_description":"OpenRouter::Schema validation rejects invalid data","status":"passed","file_path":"./spec/schema_spec.rb","line_number":192,"run_time":0.000168,"pending_message":null},{"id":"./spec/schema_spec.rb[1:7:3]","description":"rejects missing required fields","full_description":"OpenRouter::Schema validation rejects missing required fields","status":"passed","file_path":"./spec/schema_spec.rb","line_number":198,"run_time":0.000147,"pending_message":null},{"id":"./spec/schema_spec.rb[1:8:1]","description":"detects when JSON::Validator is available","full_description":"OpenRouter::Schema validation availability detects when JSON::Validator is available","status":"passed","file_path":"./spec/schema_spec.rb","line_number":208,"run_time":3.2e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[1:1:1]","description":"parses tool call data correctly","full_description":"OpenRouter::ToolCall#initialize parses tool call data correctly","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":16,"run_time":3.3e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[1:1:2]","description":"raises error for invalid data","full_description":"OpenRouter::ToolCall#initialize raises error for invalid data","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":25,"run_time":3.5e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[1:2:1]","description":"parses JSON arguments correctly","full_description":"OpenRouter::ToolCall#arguments parses JSON arguments correctly","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":35,"run_time":3.3e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[1:2:2]","description":"raises error for invalid JSON","full_description":"OpenRouter::ToolCall#arguments raises error for invalid JSON","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":44,"run_time":3.7e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[1:2:3]","description":"caches parsed arguments","full_description":"OpenRouter::ToolCall#arguments caches parsed arguments","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":55,"run_time":2.9e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[1:3:1]","description":"executes with block and returns result","full_description":"OpenRouter::ToolCall#execute executes with block and returns result","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":66,"run_time":4.1e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[1:3:2]","description":"requires a block","full_description":"OpenRouter::ToolCall#execute requires a block","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":80,"run_time":3.5e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[1:4:1]","description":"converts to assistant message format","full_description":"OpenRouter::ToolCall#to_message converts to assistant message format","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":90,"run_time":3.4e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[1:5:1]","description":"converts result to tool message format","full_description":"OpenRouter::ToolCall#to_result_message converts result to tool message format","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":103,"run_time":3.0e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[1:5:2]","description":"converts non-string results to JSON","full_description":"OpenRouter::ToolCall#to_result_message converts non-string results to JSON","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":114,"run_time":2.9e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[2:1:1]","description":"creates successful result","full_description":"OpenRouter::ToolResult.success creates successful result","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":140,"run_time":3.5e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[2:2:1]","description":"creates failed result","full_description":"OpenRouter::ToolResult.failure creates failed result","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":151,"run_time":3.2e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[2:3:1]","description":"converts to tool message with result","full_description":"OpenRouter::ToolResult#to_message converts to tool message with result","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":162,"run_time":3.0e-05,"pending_message":null},{"id":"./spec/tool_call_spec.rb[2:3:2]","description":"converts to tool message with error","full_description":"OpenRouter::ToolResult#to_message converts to tool message with error","status":"passed","file_path":"./spec/tool_call_spec.rb","line_number":170,"run_time":0.000118,"pending_message":null},{"id":"./spec/tool_spec.rb[1:1:1]","description":"creates a tool with DSL","full_description":"OpenRouter::Tool.define creates a tool with DSL","status":"passed","file_path":"./spec/tool_spec.rb","line_number":5,"run_time":8.6e-05,"pending_message":null},{"id":"./spec/tool_spec.rb[1:1:2]","description":"supports array parameters with items","full_description":"OpenRouter::Tool.define supports array parameters with items","status":"passed","file_path":"./spec/tool_spec.rb","line_number":22,"run_time":5.9e-05,"pending_message":null},{"id":"./spec/tool_spec.rb[1:1:3]","description":"supports nested object parameters","full_description":"OpenRouter::Tool.define supports nested object parameters","status":"passed","file_path":"./spec/tool_spec.rb","line_number":38,"run_time":4.1e-05,"pending_message":null},{"id":"./spec/tool_spec.rb[1:2:1]","description":"creates a tool from hash definition","full_description":"OpenRouter::Tool.new creates a tool from hash definition","status":"passed","file_path":"./spec/tool_spec.rb","line_number":61,"run_time":3.3e-05,"pending_message":null},{"id":"./spec/tool_spec.rb[1:2:2]","description":"accepts function format","full_description":"OpenRouter::Tool.new accepts function format","status":"passed","file_path":"./spec/tool_spec.rb","line_number":78,"run_time":3.3e-05,"pending_message":null},{"id":"./spec/tool_spec.rb[1:3:1]","description":"returns proper OpenRouter format","full_description":"OpenRouter::Tool#to_h returns proper OpenRouter format","status":"passed","file_path":"./spec/tool_spec.rb","line_number":100,"run_time":4.5e-05,"pending_message":null},{"id":"./spec/tool_spec.rb[1:4:1]","description":"requires name","full_description":"OpenRouter::Tool validation requires name","status":"passed","file_path":"./spec/tool_spec.rb","line_number":118,"run_time":6.9e-05,"pending_message":null},{"id":"./spec/tool_spec.rb[1:4:2]","description":"requires description","full_description":"OpenRouter::Tool validation requires description","status":"passed","file_path":"./spec/tool_spec.rb","line_number":124,"run_time":4.7e-05,"pending_message":null},{"id":"./spec/tool_spec.rb[1:4:3]","description":"validates parameters type","full_description":"OpenRouter::Tool validation validates parameters type","status":"passed","file_path":"./spec/tool_spec.rb","line_number":130,"run_time":3.6e-05,"pending_message":null},{"id":"./spec/vcr/basic_completion_spec.rb[1:1:1]","description":"completes a simple message with gpt-3.5-turbo","full_description":"OpenRouter Basic Completions single model completion completes a simple message with gpt-3.5-turbo","status":"passed","file_path":"./spec/vcr/basic_completion_spec.rb","line_number":15,"run_time":0.010293,"pending_message":null},{"id":"./spec/vcr/basic_completion_spec.rb[1:2:1]","description":"respects max_tokens parameter","full_description":"OpenRouter Basic Completions completion with parameters respects max_tokens parameter","status":"passed","file_path":"./spec/vcr/basic_completion_spec.rb","line_number":35,"run_time":0.005067,"pending_message":null},{"id":"./spec/vcr/basic_completion_spec.rb[1:3:1]","description":"works with Claude model","full_description":"OpenRouter Basic Completions completion with different models works with Claude model","status":"passed","file_path":"./spec/vcr/basic_completion_spec.rb","line_number":52,"run_time":0.004705,"pending_message":null},{"id":"./spec/vcr/basic_completion_spec.rb[1:3:2]","description":"works with GPT-4 model","full_description":"OpenRouter Basic Completions completion with different models works with GPT-4 model","status":"passed","file_path":"./spec/vcr/basic_completion_spec.rb","line_number":64,"run_time":0.004387,"pending_message":null},{"id":"./spec/vcr/basic_completion_spec.rb[1:4:1]","description":"handles multi-turn conversations","full_description":"OpenRouter Basic Completions conversation continuation handles multi-turn conversations","status":"passed","file_path":"./spec/vcr/basic_completion_spec.rb","line_number":78,"run_time":0.004529,"pending_message":null},{"id":"./spec/vcr/basic_completion_spec.rb[1:5:1]","description":"respects system messages","full_description":"OpenRouter Basic Completions system message support respects system messages","status":"passed","file_path":"./spec/vcr/basic_completion_spec.rb","line_number":97,"run_time":0.00755,"pending_message":null},{"id":"./spec/vcr/basic_completion_spec.rb[1:6:1]","description":"includes all expected response fields","full_description":"OpenRouter Basic Completions response metadata includes all expected response fields","status":"passed","file_path":"./spec/vcr/basic_completion_spec.rb","line_number":115,"run_time":0.006454,"pending_message":null},{"id":"./spec/vcr/basic_completion_spec.rb[1:7:1]","description":"maintains hash access patterns","full_description":"OpenRouter Basic Completions backward compatibility maintains hash access patterns","status":"passed","file_path":"./spec/vcr/basic_completion_spec.rb","line_number":149,"run_time":0.004613,"pending_message":null},{"id":"./spec/vcr/basic_completion_spec.rb[1:8:1]","description":"accepts provider preferences","full_description":"OpenRouter Basic Completions providers parameter accepts provider preferences","status":"passed","file_path":"./spec/vcr/basic_completion_spec.rb","line_number":172,"run_time":0.005247,"pending_message":null},{"id":"./spec/vcr/basic_completion_spec.rb[1:9:1]","description":"accepts transform instructions","full_description":"OpenRouter Basic Completions transforms parameter accepts transform instructions","status":"passed","file_path":"./spec/vcr/basic_completion_spec.rb","line_number":186,"run_time":0.005362,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:1:1]","description":"handles invalid API key gracefully","full_description":"OpenRouter Error Handling authentication errors handles invalid API key gracefully","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":15,"run_time":0.004278,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:1:2]","description":"handles missing API key","full_description":"OpenRouter Error Handling authentication errors handles missing API key","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":27,"run_time":0.004314,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:2:1]","description":"handles non-existent model","full_description":"OpenRouter Error Handling model errors handles non-existent model","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":41,"run_time":0.005045,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:2:2]","description":"handles model access restrictions","full_description":"OpenRouter Error Handling model errors handles model access restrictions","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":53,"run_time":0.004923,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:3:1]","description":"handles invalid max_tokens values","full_description":"OpenRouter Error Handling parameter validation errors handles invalid max_tokens values","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":72,"run_time":0.004746,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:3:2]","description":"handles invalid temperature values","full_description":"OpenRouter Error Handling parameter validation errors handles invalid temperature values","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":84,"run_time":0.004686,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:3:3]","description":"handles empty messages array","full_description":"OpenRouter Error Handling parameter validation errors handles empty messages array","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":99,"run_time":0.004902,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:3:4]","description":"handles malformed message structure","full_description":"OpenRouter Error Handling parameter validation errors handles malformed message structure","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":111,"run_time":0.005077,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:4:1]","description":"handles invalid tool definitions","full_description":"OpenRouter Error Handling tool calling errors handles invalid tool definitions","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":139,"run_time":0.005106,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:4:2]","description":"handles tool choice for non-existent tool","full_description":"OpenRouter Error Handling tool calling errors handles tool choice for non-existent tool","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":152,"run_time":0.004671,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:5:1]","description":"handles invalid schema definitions","full_description":"OpenRouter Error Handling structured output errors handles invalid schema definitions","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":186,"run_time":0.005009,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:5:2]","description":"handles models that don't support structured outputs","full_description":"OpenRouter Error Handling structured output errors handles models that don't support structured outputs","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":200,"run_time":0.005085,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:6:1]","description":"handles rate limit responses gracefully","full_description":"OpenRouter Error Handling rate limiting handles rate limit responses gracefully","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":223,"run_time":0.022248,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:7:1]","description":"handles timeout scenarios","full_description":"OpenRouter Error Handling network and timeout errors handles timeout scenarios","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":248,"run_time":0.004454,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:8:1]","description":"handles empty responses","full_description":"OpenRouter Error Handling malformed response handling handles empty responses","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":271,"run_time":9.4e-05,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:8:2]","description":"handles responses with error fields","full_description":"OpenRouter Error Handling malformed response handling handles responses with error fields","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":279,"run_time":0.005122,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:9:1]","description":"handles ModelRegistry API failures gracefully","full_description":"OpenRouter Error Handling model registry error handling handles ModelRegistry API failures gracefully","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":295,"run_time":0.014976,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:9:2]","description":"handles ModelRegistry with invalid API responses","full_description":"OpenRouter Error Handling model registry error handling handles ModelRegistry with invalid API responses","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":309,"run_time":0.00012,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:10:1]","description":"handles cases where no models meet requirements","full_description":"OpenRouter Error Handling smart completion error scenarios handles cases where no models meet requirements","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":321,"run_time":0.008474,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:10:2]","description":"handles smart_complete_with_fallback when all models fail","full_description":"OpenRouter Error Handling smart completion error scenarios handles smart_complete_with_fallback when all models fail","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":334,"run_time":0.016808,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:11:1]","description":"provides informative error messages","full_description":"OpenRouter Error Handling error message quality provides informative error messages","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":352,"run_time":0.004481,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:12:1]","description":"properly extracts error information from API responses","full_description":"OpenRouter Error Handling client error response structure properly extracts error information from API responses","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":369,"run_time":0.006637,"pending_message":null},{"id":"./spec/vcr/error_handling_spec.rb[1:13:1]","description":"handles multiple simultaneous requests with some failures","full_description":"OpenRouter Error Handling concurrent request error handling handles multiple simultaneous requests with some failures","status":"passed","file_path":"./spec/vcr/error_handling_spec.rb","line_number":387,"run_time":0.015139,"pending_message":null},{"id":"./spec/vcr/model_fallback_spec.rb[1:1:1]","description":"uses fallback route with array of models","full_description":"OpenRouter Model Fallback models array with fallback route uses fallback route with array of models","status":"passed","file_path":"./spec/vcr/model_fallback_spec.rb","line_number":15,"run_time":0.004652,"pending_message":null},{"id":"./spec/vcr/model_fallback_spec.rb[1:2:1]","description":"attempts models in specified order","full_description":"OpenRouter Model Fallback ordered fallback preference attempts models in specified order","status":"passed","file_path":"./spec/vcr/model_fallback_spec.rb","line_number":46,"run_time":0.004639,"pending_message":null},{"id":"./spec/vcr/model_fallback_spec.rb[1:3:1]","description":"respects provider preferences in fallback","full_description":"OpenRouter Model Fallback fallback with specific providers respects provider preferences in fallback","status":"passed","file_path":"./spec/vcr/model_fallback_spec.rb","line_number":70,"run_time":0.004591,"pending_message":null},{"id":"./spec/vcr/model_fallback_spec.rb[1:4:1]","description":"handles tool calling with model fallback","full_description":"OpenRouter Model Fallback fallback with tool calling handles tool calling with model fallback","status":"passed","file_path":"./spec/vcr/model_fallback_spec.rb","line_number":99,"run_time":0.004235,"pending_message":null},{"id":"./spec/vcr/model_fallback_spec.rb[1:5:1]","description":"handles structured outputs with model fallback","full_description":"OpenRouter Model Fallback fallback with structured outputs handles structured outputs with model fallback","status":"passed","file_path":"./spec/vcr/model_fallback_spec.rb","line_number":136,"run_time":0.005139,"pending_message":null},{"id":"./spec/vcr/model_fallback_spec.rb[1:6:1]","description":"uses smart_complete_with_fallback method","full_description":"OpenRouter Model Fallback smart completion with fallback uses smart_complete_with_fallback method","status":"passed","file_path":"./spec/vcr/model_fallback_spec.rb","line_number":159,"run_time":0.00498,"pending_message":null},{"id":"./spec/vcr/model_fallback_spec.rb[1:7:1]","description":"maintains request parameters across fallback attempts","full_description":"OpenRouter Model Fallback fallback behavior with different request parameters maintains request parameters across fallback attempts","status":"passed","file_path":"./spec/vcr/model_fallback_spec.rb","line_number":182,"run_time":0.004922,"pending_message":null},{"id":"./spec/vcr/model_fallback_spec.rb[1:8:1]","description":"successfully falls back across different model families","full_description":"OpenRouter Model Fallback mixed model families in fallback successfully falls back across different model families","status":"passed","file_path":"./spec/vcr/model_fallback_spec.rb","line_number":205,"run_time":0.004597,"pending_message":null},{"id":"./spec/vcr/model_fallback_spec.rb[1:9:1]","description":"handles case where some models in array are unavailable","full_description":"OpenRouter Model Fallback fallback error scenarios handles case where some models in array are unavailable","status":"passed","file_path":"./spec/vcr/model_fallback_spec.rb","line_number":232,"run_time":0.004471,"pending_message":null},{"id":"./spec/vcr/model_fallback_spec.rb[1:10:1]","description":"maintains consistency in multi-turn conversations with fallback","full_description":"OpenRouter Model Fallback fallback with conversation continuation maintains consistency in multi-turn conversations with fallback","status":"passed","file_path":"./spec/vcr/model_fallback_spec.rb","line_number":255,"run_time":0.009112,"pending_message":null},{"id":"./spec/vcr/model_fallback_spec.rb[1:11:1]","description":"provides complete metadata for fallback responses","full_description":"OpenRouter Model Fallback fallback response metadata provides complete metadata for fallback responses","status":"passed","file_path":"./spec/vcr/model_fallback_spec.rb","line_number":289,"run_time":0.004849,"pending_message":null},{"id":"./spec/vcr/model_fallback_spec.rb[1:12:1]","description":"completes requests efficiently with fallback","full_description":"OpenRouter Model Fallback performance characteristics of fallback completes requests efficiently with fallback","status":"passed","file_path":"./spec/vcr/model_fallback_spec.rb","line_number":322,"run_time":0.004717,"pending_message":null},{"id":"./spec/vcr/model_fallback_spec.rb[1:13:1]","description":"correctly sets route parameter for model arrays","full_description":"OpenRouter Model Fallback route parameter validation correctly sets route parameter for model arrays","status":"passed","file_path":"./spec/vcr/model_fallback_spec.rb","line_number":349,"run_time":0.004516,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:1:1]","description":"successfully fetches model list from OpenRouter API","full_description":"OpenRouter ModelRegistry fetching models from API successfully fetches model list from OpenRouter API","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":17,"run_time":0.008537,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:2:1]","description":"caches models after first fetch","full_description":"OpenRouter ModelRegistry caching behavior caches models after first fetch","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":37,"run_time":0.013757,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:2:2]","description":"loads from cache on subsequent calls","full_description":"OpenRouter ModelRegistry caching behavior loads from cache on subsequent calls","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":52,"run_time":0.018512,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:2:3]","description":"refreshes cache when explicitly requested","full_description":"OpenRouter ModelRegistry caching behavior refreshes cache when explicitly requested","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":65,"run_time":0.017228,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:3:1]","description":"processes API models into internal format","full_description":"OpenRouter ModelRegistry model processing processes API models into internal format","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":77,"run_time":0.008022,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:3:2]","description":"extracts capabilities correctly","full_description":"OpenRouter ModelRegistry model processing extracts capabilities correctly","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":107,"run_time":0.010301,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:3:3]","description":"assigns performance tiers correctly","full_description":"OpenRouter ModelRegistry model processing assigns performance tiers correctly","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":123,"run_time":0.014682,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:4:1]","description":"checks if models exist","full_description":"OpenRouter ModelRegistry model lookup methods checks if models exist","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":135,"run_time":0.010298,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:4:2]","description":"retrieves model information","full_description":"OpenRouter ModelRegistry model lookup methods retrieves model information","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":140,"run_time":0.008185,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:4:3]","description":"calculates estimated costs","full_description":"OpenRouter ModelRegistry model lookup methods calculates estimated costs","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":150,"run_time":0.007334,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:5:1]","description":"finds models meeting capability requirements","full_description":"OpenRouter ModelRegistry model selection finds models meeting capability requirements","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":171,"run_time":0.007757,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:5:2]","description":"finds models within cost constraints","full_description":"OpenRouter ModelRegistry model selection finds models within cost constraints","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":185,"run_time":0.008035,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:5:3]","description":"finds models with minimum context length","full_description":"OpenRouter ModelRegistry model selection finds models with minimum context length","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":198,"run_time":0.008817,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:5:4]","description":"finds best model with multiple constraints","full_description":"OpenRouter ModelRegistry model selection finds best model with multiple constraints","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":211,"run_time":0.008135,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:5:5]","description":"respects pick_newer preference","full_description":"OpenRouter ModelRegistry model selection respects pick_newer preference","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":227,"run_time":0.008381,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:6:1]","description":"handles network errors gracefully","full_description":"OpenRouter ModelRegistry error handling handles network errors gracefully","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":241,"run_time":0.015344,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:7:1]","description":"validates that models from registry work with client","full_description":"OpenRouter ModelRegistry integration with Client validates that models from registry work with client","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":258,"run_time":0.019841,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:8:1]","description":"handles corrupted cache files","full_description":"OpenRouter ModelRegistry cache file management handles corrupted cache files","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":285,"run_time":0.007922,"pending_message":null},{"id":"./spec/vcr/model_registry_spec.rb[1:8:2]","description":"clears cache completely","full_description":"OpenRouter ModelRegistry cache file management clears cache completely","status":"passed","file_path":"./spec/vcr/model_registry_spec.rb","line_number":296,"run_time":0.006774,"pending_message":null},{"id":"./spec/vcr/response_healing_spec.rb[1:1:1]","description":"attempts to generate and heal malformed JSON with tricky prompts","full_description":"Response Healing with Real API testing malformed JSON scenarios attempts to generate and heal malformed JSON with tricky prompts","status":"passed","file_path":"./spec/vcr/response_healing_spec.rb","line_number":38,"run_time":0.014715,"pending_message":null},{"id":"./spec/vcr/response_healing_spec.rb[1:2:1]","description":"handles responses with embedded JSON examples","full_description":"Response Healing with Real API edge case content that might break parsing handles responses with embedded JSON examples","status":"passed","file_path":"./spec/vcr/response_healing_spec.rb","line_number":80,"run_time":0.005513,"pending_message":null},{"id":"./spec/vcr/response_healing_spec.rb[1:3:1]","description":"heals complex nested JSON structures","full_description":"Response Healing with Real API complex nested structure healing heals complex nested JSON structures","status":"passed","file_path":"./spec/vcr/response_healing_spec.rb","line_number":114,"run_time":0.005622,"pending_message":null},{"id":"./spec/vcr/response_healing_spec.rb[1:4:1]","description":"uses Claude as a healer model for GPT responses","full_description":"Response Healing with Real API healing with different healer models uses Claude as a healer model for GPT responses","status":"passed","file_path":"./spec/vcr/response_healing_spec.rb","line_number":160,"run_time":0.007627,"pending_message":null},{"id":"./spec/vcr/response_healing_spec.rb[1:5:1]","description":"respects max_heal_attempts configuration","full_description":"Response Healing with Real API testing healing attempt limits respects max_heal_attempts configuration","status":"passed","file_path":"./spec/vcr/response_healing_spec.rb","line_number":203,"run_time":0.005147,"pending_message":null},{"id":"./spec/vcr/response_healing_spec.rb[1:6:1]","description":"compares behavior with and without healing enabled","full_description":"Response Healing with Real API healing disabled vs enabled comparison compares behavior with and without healing enabled","status":"passed","file_path":"./spec/vcr/response_healing_spec.rb","line_number":249,"run_time":0.008925,"pending_message":null},{"id":"./spec/vcr/response_healing_spec.rb[1:7:1]","description":"handles common JSON malformation patterns from LLM responses","full_description":"Response Healing with Real API real-world malformation scenarios handles common JSON malformation patterns from LLM responses","status":"passed","file_path":"./spec/vcr/response_healing_spec.rb","line_number":303,"run_time":0.005274,"pending_message":null},{"id":"./spec/vcr/response_healing_spec.rb[1:8:1]","description":"heals responses that fail schema validation","full_description":"Response Healing with Real API healing validation with json-schema heals responses that fail schema validation","status":"passed","file_path":"./spec/vcr/response_healing_spec.rb","line_number":351,"run_time":0.005849,"pending_message":null},{"id":"./spec/vcr/response_healing_spec.rb[1:9:1]","description":"tests healing with high temperature responses","full_description":"Response Healing with Real API healing with different temperature settings tests healing with high temperature responses","status":"passed","file_path":"./spec/vcr/response_healing_spec.rb","line_number":405,"run_time":0.00652,"pending_message":null},{"id":"./spec/vcr/structured_outputs_spec.rb[1:1:1]","description":"returns valid JSON matching the schema","full_description":"OpenRouter Structured Outputs simple structured output returns valid JSON matching the schema","status":"passed","file_path":"./spec/vcr/structured_outputs_spec.rb","line_number":48,"run_time":0.005012,"pending_message":null},{"id":"./spec/vcr/structured_outputs_spec.rb[1:2:1]","description":"handles nested objects and arrays correctly","full_description":"OpenRouter Structured Outputs complex nested structured output handles nested objects and arrays correctly","status":"passed","file_path":"./spec/vcr/structured_outputs_spec.rb","line_number":75,"run_time":0.008859,"pending_message":null},{"id":"./spec/vcr/structured_outputs_spec.rb[1:3:1]","description":"correctly structures arrays of complex objects","full_description":"OpenRouter Structured Outputs array of objects schema correctly structures arrays of complex objects","status":"passed","file_path":"./spec/vcr/structured_outputs_spec.rb","line_number":117,"run_time":0.010383,"pending_message":null},{"id":"./spec/vcr/structured_outputs_spec.rb[1:4:1]","description":"works with hash-based response format specification","full_description":"OpenRouter Structured Outputs hash-based response format works with hash-based response format specification","status":"passed","file_path":"./spec/vcr/structured_outputs_spec.rb","line_number":153,"run_time":0.004831,"pending_message":null},{"id":"./spec/vcr/structured_outputs_spec.rb[1:5:1]","description":"validates response against schema when json-schema is available","full_description":"OpenRouter Structured Outputs schema validation validates response against schema when json-schema is available","status":"passed","file_path":"./spec/vcr/structured_outputs_spec.rb","line_number":190,"run_time":0.005253,"pending_message":null},{"id":"./spec/vcr/structured_outputs_spec.rb[1:6:1]","description":"handles invalid schema definitions","full_description":"OpenRouter Structured Outputs error handling handles invalid schema definitions","status":"passed","file_path":"./spec/vcr/structured_outputs_spec.rb","line_number":219,"run_time":0.00011,"pending_message":null},{"id":"./spec/vcr/structured_outputs_spec.rb[1:6:2]","description":"handles JSON parsing errors gracefully","full_description":"OpenRouter Structured Outputs error handling handles JSON parsing errors gracefully","status":"passed","file_path":"./spec/vcr/structured_outputs_spec.rb","line_number":231,"run_time":7.5e-05,"pending_message":null},{"id":"./spec/vcr/structured_outputs_spec.rb[1:7:1]","description":"correctly builds schemas using DSL","full_description":"OpenRouter Structured Outputs schema builder DSL correctly builds schemas using DSL","status":"passed","file_path":"./spec/vcr/structured_outputs_spec.rb","line_number":253,"run_time":8.6e-05,"pending_message":null},{"id":"./spec/vcr/structured_outputs_spec.rb[1:8:1]","description":"maintains all response metadata while providing structured output","full_description":"OpenRouter Structured Outputs response metadata with structured outputs maintains all response metadata while providing structured output","status":"passed","file_path":"./spec/vcr/structured_outputs_spec.rb","line_number":281,"run_time":0.004556,"pending_message":null},{"id":"./spec/vcr/structured_outputs_spec.rb[1:9:1]","description":"handles non-strict schemas allowing additional properties","full_description":"OpenRouter Structured Outputs strict vs non-strict schemas handles non-strict schemas allowing additional properties","status":"passed","file_path":"./spec/vcr/structured_outputs_spec.rb","line_number":321,"run_time":0.004537,"pending_message":null},{"id":"./spec/vcr/structured_outputs_spec.rb[1:10:1]","description":"properly serializes schemas for the OpenRouter API","full_description":"OpenRouter Structured Outputs schema serialization for API properly serializes schemas for the OpenRouter API","status":"passed","file_path":"./spec/vcr/structured_outputs_spec.rb","line_number":343,"run_time":0.00883,"pending_message":null},{"id":"./spec/vcr/structured_outputs_spec.rb[1:11:1]","description":"works with different models that support structured outputs","full_description":"OpenRouter Structured Outputs integration with different models works with different models that support structured outputs","status":"passed","file_path":"./spec/vcr/structured_outputs_spec.rb","line_number":371,"run_time":0.01022,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:1:1]","description":"successfully makes a tool call with DSL-defined tool","full_description":"OpenRouter Tool Calling single tool call successfully makes a tool call with DSL-defined tool","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":61,"run_time":0.006804,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:1:2]","description":"works with hash-defined tools","full_description":"OpenRouter Tool Calling single tool call works with hash-defined tools","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":92,"run_time":0.005392,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:2:1]","description":"chooses appropriate tool from multiple options","full_description":"OpenRouter Tool Calling multiple tools available chooses appropriate tool from multiple options","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":115,"run_time":0.005493,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:3:1]","description":"respects specific tool choice","full_description":"OpenRouter Tool Calling tool choice parameter respects specific tool choice","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":138,"run_time":0.005834,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:3:2]","description":"respects required tool choice","full_description":"OpenRouter Tool Calling tool choice parameter respects required tool choice","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":156,"run_time":0.004326,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:3:3]","description":"respects none tool choice","full_description":"OpenRouter Tool Calling tool choice parameter respects none tool choice","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":172,"run_time":0.004988,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:4:1]","description":"completes full tool calling workflow","full_description":"OpenRouter Tool Calling tool execution and conversation continuation completes full tool calling workflow","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":191,"run_time":0.010327,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:5:1]","description":"handles multiple tool calls when requested","full_description":"OpenRouter Tool Calling multiple tool calls in one response handles multiple tool calls when requested","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":250,"run_time":0.005692,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:6:1]","description":"properly serializes tool calls to conversation messages","full_description":"OpenRouter Tool Calling tool call serialization properly serializes tool calls to conversation messages","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":277,"run_time":0.00448,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:7:1]","description":"handles tool execution errors gracefully","full_description":"OpenRouter Tool Calling tool call error handling handles tool execution errors gracefully","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":312,"run_time":0.005634,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:7:2]","description":"handles malformed tool arguments","full_description":"OpenRouter Tool Calling tool call error handling handles malformed tool arguments","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":344,"run_time":8.7e-05,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:8:1]","description":"validates tool definitions correctly","full_description":"OpenRouter Tool Calling tool validation validates tool definitions correctly","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":364,"run_time":6.8e-05,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:8:2]","description":"validates hash-based tool definitions","full_description":"OpenRouter Tool Calling tool validation validates hash-based tool definitions","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":380,"run_time":4.8e-05,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:9:1]","description":"handles complex parameter structures","full_description":"OpenRouter Tool Calling complex parameter types handles complex parameter structures","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":413,"run_time":0.004704,"pending_message":null},{"id":"./spec/vcr/tool_calling_spec.rb[1:10:1]","description":"validates complete response structure with tool calls","full_description":"OpenRouter Tool Calling response structure validation validates complete response structure with tool calls","status":"passed","file_path":"./spec/vcr/tool_calling_spec.rb","line_number":442,"run_time":0.004737,"pending_message":null}],"summary":{"duration":0.815462,"example_count":413,"failure_count":0,"pending_count":1,"errors_outside_of_examples_count":0},"summary_line":"413 examples, 0 failures, 1 pending"}